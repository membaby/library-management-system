{"openapi":"3.0.0","info":{"title":"Library Management System","version":"1.0.0","description":"RESTful API for managing books and borrows"},"servers":[{"url":"http://localhost:3000"}],"components":{"schemas":{"Book":{"type":"object","example":{"title":"Dive Into Design Patterns","author":"Alexander Shvets","isbn":"9798900706498","shelfLocation":"A1-B2","availableQuantity":3},"properties":{"title":{"type":"string"},"author":{"type":"string"},"isbn":{"type":"string"},"shelfLocation":{"type":"string","nullable":true},"availableQuantity":{"type":"integer"}}},"Borrower":{"type":"object","example":{"name":"Mahmoud Embaby","email":"mah.embaby@outlook.com"},"properties":{"name":{"type":"string"},"email":{"type":"string"}}},"CreateBorrow":{"type":"object","example":{"bookId":1,"borrowerId":1,"dueAt":"2026-01-29T10:00:00.000Z"},"properties":{"bookId":{"type":"integer"}}}}},"tags":[{"name":"Books","description":"Book management"},{"name":"Borrowers","description":"Borrower management"},{"name":"Borrows","description":"Borrow & return operations"}],"security":[{"bearerAuth":[]}],"paths":{"/books":{"post":{"tags":["Books"],"summary":"Create a new book","description":"Adds a new book to the system.","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}},"responses":{"200":{"description":"Book created successfully"},"400":{"description":"Invalid request body"},"409":{"description":"Book already exists"}}},"get":{"tags":["Books"],"summary":"List or search books","description":"Returns all books, or filters by id/title/author/isbn when query params are provided.","parameters":[{"in":"query","name":"limit","schema":{"type":"integer"},"description":"Number of books to return","required":false,"default":10},{"in":"query","name":"offset","schema":{"type":"integer"},"description":"Offset for pagination","required":false,"default":0},{"in":"query","name":"id","schema":{"type":"integer"},"description":"Exact match"},{"in":"query","name":"title","schema":{"type":"string"},"description":"Partial match (case-insensitive)"},{"in":"query","name":"author","schema":{"type":"string"},"description":"Partial match (case-insensitive)"},{"in":"query","name":"isbn","schema":{"type":"string"},"description":"Exact match"}],"responses":{"200":{"description":"List of books","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Book"}}}}}}}},"/books/{id}":{"put":{"tags":["Books"],"summary":"Update a book by ID","description":"Updates a book's details.","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"ID of the book to update"}],"responses":{"200":{"description":"Book updated successfully"},"404":{"description":"Book not found"},"409":{"description":"Book already exists"}}},"delete":{"tags":["Books"],"summary":"Delete a book by ID","description":"Removes a book from the system.","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"ID of the book to delete"}],"responses":{"200":{"description":"Book deleted successfully"},"404":{"description":"Book not found"}}}},"/borrowers":{"post":{"tags":["Borrowers"],"summary":"Create a new borrower","description":"Adds a new borrower to the system.","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Borrower"}}}},"responses":{"200":{"description":"Borrower created successfully"},"409":{"description":"Borrower already exists"}}},"get":{"tags":["Borrowers"],"summary":"List or search borrowers","description":"Returns all borrowers, or filters by id/name/email when query params are provided.","parameters":[{"in":"query","name":"limit","schema":{"type":"integer"},"description":"Number of borrowers to return","required":false,"default":10},{"in":"query","name":"offset","schema":{"type":"integer"},"description":"Offset for pagination","required":false,"default":0},{"in":"query","name":"name","schema":{"type":"string"},"description":"Partial match (case-insensitive)"},{"in":"query","name":"email","schema":{"type":"string"},"description":"Partial match (case-insensitive)"},{"in":"query","name":"id","schema":{"type":"string"},"description":"Exact match"}],"responses":{"200":{"description":"List of borrowers","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Borrower"}}}}}}}},"/borrowers/{id}":{"put":{"tags":["Borrowers"],"summary":"Update a borrower by ID","description":"Updates a borrower's details.","parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"ID of the borrower to update"}],"responses":{"200":{"description":"Borrower updated successfully"},"400":{"description":"At least one field to update is required"},"404":{"description":"Borrower not found"},"409":{"description":"Borrower already exists"}}},"delete":{"tags":["Borrowers"],"summary":"Delete a borrower by ID","description":"Removes a borrower from the system.","parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"ID of the borrower to delete"}],"responses":{"200":{"description":"Borrower deleted successfully"},"404":{"description":"Borrower not found"},"409":{"description":"Borrower has active books borrowed"}}}},"/borrows":{"post":{"tags":["Borrows"],"summary":"Checkout a book","description":"Checks out a book to a borrower.","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBorrow"}}}},"responses":{"200":{"description":"Book checked out successfully"},"409":{"description":"Book is not available"}}},"get":{"tags":["Borrows"],"summary":"Get all borrows","description":"Gets all borrows from the library.","responses":{"200":{"description":"Borrows retrieved successfully"},"400":{"description":"Invalid request"}},"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"required":false,"description":"Number of borrows to return"},{"in":"query","name":"offset","schema":{"type":"number"},"required":false,"description":"Offset for pagination"},{"in":"query","name":"borrowerId","schema":{"type":"number"},"required":false,"description":"ID of the borrower"},{"in":"query","name":"bookId","schema":{"type":"number"},"required":false,"description":"ID of the book"},{"in":"query","name":"dueAt","schema":{"type":"string"},"required":false,"description":"Due date of the borrow"},{"in":"query","name":"active","schema":{"type":"boolean"},"required":false,"description":"Whether the borrow is active"},{"in":"query","name":"overdue","schema":{"type":"boolean"},"required":false,"description":"Whether the borrow is overdue"}]}},"/borrows/{id}/return":{"put":{"tags":["Borrows"],"summary":"Return a book","description":"Returns a book to the library.","parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"ID of the borrow to return"}],"responses":{"200":{"description":"Book returned successfully"},"404":{"description":"Borrow not found"}}}}}}